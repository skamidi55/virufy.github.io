(this.webpackJsonpvirumap=this.webpackJsonpvirumap||[]).push([[39],{192:function(e,t,n){"use strict";var r=n(6),o=n.n(r),a=n(206);t.a=function(){var e=o.a.useContext(a.a),t=e.title,n=e.setTitle,r=e.subtitle,i=e.setSubtitle,s=e.type,l=e.setType,c=e.logoSize,u=e.setLogoSize,d=e.setDoGoBack;return{title:t,setTitle:n,subtitle:r,setSubtitle:i,type:s,setType:l,logoSize:c,setLogoSize:u,doGoBack:e.doGoBack,setDoGoBack:d}}},193:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){window.scrollTo({top:0,behavior:"smooth"})}},213:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(6),o=n.n(r),a=n(204),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var s=function(e){var t=e.as,n=e.errors,r=e.name,s=e.message,l=e.render,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["as","errors","name","message","render"]),u=Object(a.f)(),d=Object(a.c)(n||u.errors,r);if(!d)return null;var p=d.message,f=d.types,v=i(i({},c),{children:p||s});return t?o.a.isValidElement(t)?o.a.cloneElement(t,v):o.a.createElement(t,v):l?l({message:p||s,messages:f}):o.a.createElement(o.a.Fragment,i({},v))}},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(6),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createElement("path",{d:"M13.983,0C6.261,0,0.001,6.259,0.001,13.979c0,7.724,6.26,13.984,13.982,13.984s13.98-6.261,13.98-13.984C27.963,6.259,21.705,0,13.983,0z M13.983,26.531c-6.933,0-12.55-5.62-12.55-12.553c0-6.93,5.617-12.548,12.55-12.548c6.931,0,12.549,5.618,12.549,12.548C26.531,20.911,20.913,26.531,13.983,26.531z"}),l=o.a.createElement("polygon",{points:"15.579,17.158 16.191,4.579 11.804,4.579 12.414,17.158"}),c=o.a.createElement("path",{d:"M13.998,18.546c-1.471,0-2.5,1.029-2.5,2.526c0,1.443,0.999,2.528,2.444,2.528h0.056c1.499,0,2.469-1.085,2.469-2.528C16.441,19.575,15.468,18.546,13.998,18.546z"}),u=function(e){var t=e.svgRef,n=e.title,r=i(e,["svgRef","title"]);return o.a.createElement("svg",a({width:"24px",height:"24px",viewBox:"0 0 27.963 27.963",fill:"none",ref:t},r),n?o.a.createElement("title",null,n):null,s,l,c)},d=o.a.forwardRef((function(e,t){return o.a.createElement(u,a({svgRef:t},e))}));n.p},290:function(e,t,n){"use strict";n.r(t);var r=n(201),o=n.n(r),a=n(202),i=n(196),s=n(6),l=n.n(s),c=n(209),u=n(199),d=n(213),p=n(775),f=n(234),v=n(193),b=n(192),m=n(330),g=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result.split(",")[1])},r.onerror=function(e){return n(e)}}))};t.default=l.a.memo((function(e){var t=Object(s.useState)(!0),n=Object(i.a)(t,2)[1],r=Object(b.a)(),O=r.setDoGoBack,y=r.setTitle,h=r.setType,j=Object(p.a)().t,x=Object(u.d)().state,S=Object(c.g)(),E=l.a.useState(null),k=Object(i.a)(E,2),w=k[0],C=k[1],T=Object(s.useCallback)(Object(a.a)(o.a.mark((function t(){var n,r,a,i,s,l,c,u,d,p,f,v,b,m,O;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,f={patientId:null===(n=x["submit-steps"])||void 0===n?void 0:n.patientId,gender:null===(r=x["submit-steps"])||void 0===r?void 0:r.biologicalSex,age:null===(a=x["submit-steps"])||void 0===a?void 0:a.ageGroup,conditions:null===(i=x["submit-steps"])||void 0===i?void 0:i.currentMedicalCondition,latitude:null===(s=x["submit-steps"])||void 0===s?void 0:s.location.lat,longitude:null===(l=x["submit-steps"])||void 0===l?void 0:l.location.lng},!((v=(null===(c=x["submit-steps"])||void 0===c||null===(u=c.recordYourCough)||void 0===u?void 0:u.recordingFile)||(null===(d=x["submit-steps"])||void 0===d||null===(p=d.recordYourCough)||void 0===p?void 0:p.uploadedFile))instanceof Blob)){t.next=17;break}return t.next=6,g(v);case 6:return b=t.sent,t.next=9,fetch("https://xg5f3ydxfc.execute-api.us-east-1.amazonaws.com/elderlycarelambda",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({structuredData:f,coughFile:b})});case 9:return m=t.sent,t.next=12,m.json();case 12:O=t.sent,console.log("Response:",O),e.nextStep&&S.push(e.nextStep),t.next=18;break;case 17:console.error("Files not found.");case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(0),console.error("Error sending data: Failed to send data."),C("Failed to send data.");case 24:case"end":return t.stop()}}),t,null,[[0,20]])}))),[x,S,e.nextStep]),P=Object(s.useCallback)((function(){e.previousStep?(n(!1),S.push(e.previousStep)):S.goBack()}),[]),F=Object(s.useCallback)((function(){var t,n,r,o,a,i,s;console.log("MOCK: sending to backend"),console.log(x),console.log("patientId",null===(t=x["submit-steps"])||void 0===t?void 0:t.patientId,"Conditions",null===(n=x["submit-steps"])||void 0===n?void 0:n.currentMedicalCondition,"location",null===(r=x["submit-steps"])||void 0===r?void 0:r.location.lat,"location",null===(o=x["submit-steps"])||void 0===o?void 0:o.location.lng,"sick",null===(a=x["submit-steps"])||void 0===a?void 0:a.sick,"gender",null===(i=x["submit-steps"])||void 0===i?void 0:i.biologicalSex,"age",null===(s=x["submit-steps"])||void 0===s?void 0:s.ageGroup),setTimeout((function(){e.nextStep&&S.push(e.nextStep)}),2e3)}),[x,S,e.nextStep]);return Object(s.useEffect)((function(){Object(v.a)(),y(""),h("tertiary"),O(null),T()}),[P,O,y,h,T,F]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"50px"}},l.a.createElement("h1",null,j("submit:submitting","Sending..."))),l.a.createElement(m.ImageProcessing,null),w&&l.a.createElement(d.a,{errors:{error:w},name:"error",render:function(){return l.a.createElement(m.TextErrorContainer,null,l.a.createElement(f.a,null),w)}}))}))}}]);
//# sourceMappingURL=39.480c0318.chunk.js.map